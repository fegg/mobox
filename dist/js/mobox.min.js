/*!
 * mobox 1.0.0
 * MOBOX = Modern Dialog + Pop Box + Overlay + Extensible CSS3 Effects, Inspired by Codrop&#39;s DialogEffect at github.com/codrops/DialogEffects 
 * @dependencies 
 *  1. classy.js <http://faso.me/classy>
 *  2. modernizr
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * built at 1427302236723 
 * Copyright 2015, FASO.ME <http://www.faso.me>
 */
!function(t,e){"object"==typeof exports?module.exports=e(require("./classy")):"function"==typeof define&&define.amd?define(["classy"],e):t.Mobox=e(t.classy)}(this,function(t){function e(e,n){i(e,function(e){t.toggle(e,n)})}function i(t,e){for(var i=t.length,n=0;i>n;n++)e(t[n])}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function o(i,o){this.el=i,this.options=n({sticky:!1,effect:i.getAttribute("data-effect")||"susan",effectRel:i.getAttribute("data-effect-rel")||"body"},this.options),n(this.options,o),this.ctrlClose=this.el.querySelectorAll("[data-dialog-close]"),this.elemsRel=document.querySelectorAll(this.options.effectRel),this.effectClass="mobox-effect-"+this.options.effect,e(this.elemsRel,this.effectClass+"-rel"),t.add(i,this.effectClass),this.isOpen=!1,this._initEvents()}var s={animations:Modernizr.cssanimations},r={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},c=r[Modernizr.prefixed("animation")],a=function(t,e){var i=function(t){if(s.animations){if(t.target!=this)return;this.removeEventListener(c,i)}e&&"function"==typeof e&&e.call()};s.animations?t.addEventListener(c,i):i()};return o.prototype.options={onOpen:function(){return!1},onClose:function(){return!1}},o.prototype._initEvents=function(){var t=this;i(this.ctrlClose,function(e){e.addEventListener("click",t.hide.bind(t))}),document.addEventListener("keydown",function(e){var i=e.keyCode||e.which;27===i&&t.isOpen&&t.hide()}),this.options.sticky||this.el.querySelector(".mobox-overlay").addEventListener("click",this.hide.bind(this))},o.prototype.show=function(){this.isOpen||(t.add(this.el,"mobox-open"),e(this.elemsRel,this.effectClass+"-open"),this.options.onOpen(this),this.isOpen=!0)},o.prototype.hide=function(){var i=this;this.isOpen&&(t.remove(this.el,"mobox-open"),e(this.elemsRel,this.effectClass+"-open"),t.add(i.el,"mobox-close"),a(this.el.querySelector(".mobox-inner"),function(){t.remove(i.el,"mobox-close")}),this.options.onClose(this),this.isOpen=!1)},o.prototype.toggle=function(){return this.isOpen?this.hide():this.show()},o});